import{Ha as u,Ja as h,cb as p,f as a,g as c,i,ib as m,s as l,v as s}from"./chunk-3JZCXEMK.js";var x=(()=>{let r=class r{constructor(e,t){this.http=e,this.router=t,this.baseUrl=m.apiUrl,this.currentUserSource=new a(1),this.currentUser$=this.currentUserSource.asObservable()}loadCurrentUser(e){if(e==null)return this.currentUserSource.next(null),c(null);let t=new u;return t=t.set("Authorization",`Bearer ${e}`),this.http.get(this.baseUrl+"/account",{headers:t}).pipe(i(o=>o?(localStorage.setItem("token",o.token),this.currentUserSource.next(o),o):null))}login(e){return this.http.post(this.baseUrl+"/account/login",e).pipe(i(t=>{localStorage.setItem("token",t.token),this.currentUserSource.next(t)}))}register(e){return this.http.post(this.baseUrl+"/account/register",e).pipe(i(t=>{localStorage.setItem("token",t.token),this.currentUserSource.next(t)}))}logout(){localStorage.removeItem("token"),this.currentUserSource.next(null),this.router.navigateByUrl("/")}checkEmailExists(e){return this.http.get(this.baseUrl+"/account/emailExists?email="+e)}};r.\u0275fac=function(t){return new(t||r)(s(h),s(p))},r.\u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})();export{x as a};
